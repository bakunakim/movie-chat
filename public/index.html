<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Casting Talk Utils</title>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#1a1b2e">
</head>

<body>

    <div id="app">
        <!-- LOGIN -->
        <div id="login-screen" class="screen active">
            <div class="login-box">
                <div class="logo">üé¨</div>
                <h2>Casting Talk</h2>
                <div class="desc">High-End Production Tool</div>
                <input type="text" id="username-input" placeholder="Role Name" autocomplete="off">
                <input type="password" id="password-input" placeholder="Password">
                <button id="login-btn">ENTER SCENE</button>
            </div>
        </div>

        <!-- ROOM LIST -->
        <div id="room-list-screen" class="screen">
            <header>
                <div class="header-title">Project Chats</div>
                <!-- Hamburger Menu Button -->
                <button id="main-menu-btn">‚ò∞</button>
            </header>
            <div id="rooms-list"></div>
            <button id="create-room-btn" class="fab">+</button>
        </div>

        <!-- CHAT ROOM -->
        <div id="chat-room-screen" class="screen">
            <header class="chat-header">
                <button id="back-btn" class="header-icon-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M19 12H5" />
                        <path d="M12 19l-7-7 7-7" />
                    </svg>
                </button>
                <div class="header-title-pill" id="room-title">Room</div>
                <!-- Hamburger Menu Button (Same functionality) -->
                <button id="room-menu-btn" class="header-menu-btn">‚ò∞</button>
            </header>

            <div id="messages-container"></div>

            <div id="input-area">
                <button id="emoji-btn" class="input-action-btn">
                    <!-- Clip Icon -->
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path
                            d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" />
                    </svg>
                </button>
                <input type="text" id="message-input" placeholder="Message" autocomplete="off" inputmode="text"
                    enterkeyhint="send">
                <button id="send-btn" class="input-action-btn send-plane">
                    <!-- Paper Plane Icon -->
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                    </svg>
                </button>
            </div>

            <div id="emoji-popup" class="hidden"></div>
        </div>
    </div>

    <!-- 1. MAIN MENU MODAL (Group Select) -->
    <div id="main-menu-modal" class="modal">
        <div class="modal-content menu-content">
            <div class="modal-header">
                <span>Menu</span>
                <button class="close-modal-btn">‚úï</button>
            </div>
            <div class="menu-grid">
                <div id="open-registry-btn" class="menu-card">
                    <div class="card-icon">üé≠</div>
                    <div class="card-title">Ï∫êÎ¶≠ÌÑ∞ Í¥ÄÎ¶¨</div>
                    <div class="card-desc">Character Registry</div>
                </div>
                <div id="open-settings-btn" class="menu-card">
                    <div class="card-icon">‚öôÔ∏è</div>
                    <div class="card-title">Ï¥¨ÏòÅ ÏÑ§Ï†ï</div>
                    <div class="card-desc">Settings & Tools</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 2. REGISTRY MODAL -->
    <div id="registry-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span>Character Registry</span>
                <button class="back-to-menu-btn">‚Üê</button>
            </div>

            <!-- Registration Form -->
            <div class="form-section">
                <label>New Character</label>
                <input type="text" id="reg-nickname" placeholder="Nickname">
                <input type="file" id="reg-image" accept="image/*">
                <button id="reg-submit-btn" class="action-btn">Register</button>
            </div>

            <!-- Registered List (Thumbnails) -->
            <div class="list-section">
                <label>Registered List (Local)</label>
                <div id="saved-profiles-list" class="profiles-grid">
                    <!-- JS Populated -->
                </div>
            </div>
        </div>
    </div>

    <!-- 3. SETTINGS MODAL -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span>Settings</span>
                <button class="back-to-menu-btn">‚Üê</button>
            </div>

            <div class="setting-item">
                <label>üïí Time Machine</label>
                <div class="row">
                    <input type="checkbox" id="time-toggle">
                    <input type="time" id="time-picker" disabled>
                </div>
                <p class="hint">Fix message timestamps for filming</p>
            </div>

            <div class="setting-item">
                <label>üîî Notifications</label>
                <button id="noti-btn" class="sub-btn">Allow Push</button>
            </div>

            <div class="setting-item delete-data-section">
                <label>‚ö†Ô∏è Reset Data</label>
                <button id="reset-local-btn" class="sub-btn warning">Clear Local Storage</button>
            </div>

            <button id="logout-btn" class="logout-btn">Log Out</button>
        </div>
    </div>

    <!-- GOD'S HAND DELETE POPUP -->
    <div id="delete-popup" class="delete-popup hidden">
        <button id="confirm-delete" class="delete-btn">DELETE</button>
        <div class="popup-desc">(God's Hand)</div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>

</html>